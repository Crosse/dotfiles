#!/bin/sh

case $(uname) in
    Darwin)
        pmset -g ps | awk '/InternalBattery/ { gsub(/;/, ""); printf "[batt: %s] ", $3 }'
        ;;
    Linux)
        BASE_DIR=/sys/class/power_supply/BAT0

        [ -d "$BASE_DIR" ] || exit 1

        capacity=$(<"$BASE_DIR"/capacity)
        status=$(<"$BASE_DIR"/status)

        printf "[batt: %s%%, %s] \n" "$capacity" "$status"
        ;;
esac
