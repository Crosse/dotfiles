#!/bin/sh

if [ ! "$(command -v upower)" ]; then
    echo "This command requires upower(1) to function."
    exit
fi

upower -i $(upower -e | grep BAT) |
    awk '
        /time to full/ { full=sprintf("%s %s until full", $4, $5) }
        /time to empty/ { empty=sprintf("%s %s until empty", $4, $5) }
        /percentage/ { charge=$2 }
        /state/ { state=$2 }
        END { printf "%s (%s", charge, state ;
            if (full != "" || empty != "") printf ", %s%s", full, empty ;
            printf ")\n"
        }'
