# vim: set ft=sh:

# None of this matters if the shell isn't interactive.
[[ "${-}" != *i* ]] && return

# Look for Vim...
EDITOR="$(command -v vim)"
if [ -z "$EDITOR" ]; then
    # ...but use vi if Vim doesn't exist.
    EDITOR=vi
fi
VISUAL=$EDITOR
export EDITOR VISUAL

PAGER="$(command -v less)"
if [ -x "${PAGER}" ]; then
    # Set options for less so that it:
    #   quits if only one screen (-F);
    #   causes searches to ignore case (-i);
    #   displays a status column (-J);
    #   displays a more verbose prompt, including % into the file (-m);
    #   interprets ANSI color escape sequences (-R);
    #   doesn't clear the screen after quitting (-X).
    export LESS="-FiJmRX"
else
    PAGER="$(command -v more)"
fi
export PAGER

# start gpg-agent, if installed.
if [ -x "$(command -v gpg-agent)" ]; then
    if [ -f "${HOME}/.gpg-agent-info" ]; then
        . "${HOME}/.gpg-agent-info"
        export GPG_AGENT_INFO SSH_AUTH_SOCK SSH_AGENT_PID
    fi

    if [ ! -S "$(echo $GPG_AGENT_INFO | cut -f1 -d':')" ]; then
        eval $(gpg-agent --enable-ssh-support --daemon --write-env-file)
    fi
fi
